(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7220:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ce}});var r=t(7294),i=t(4433),o=t(6155),c=t(1508),l=t(505),s=t(219),u=t(2809),a=t(2658),d=t(2640),f=t(9602),h=t(5893),x=["icon","title"];function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=(0,f.ZP)(c.Z)((function(){return{display:"flex",flexDirection:"column",alignItems:"center"}})),g=(0,f.ZP)((function(e){return(0,h.jsx)(a.Z,p({variant:"caption"},e))}))((function(e){var n=e.theme;return{height:n.spacing(2),lineHeight:n.spacing(2),whiteSpace:"nowrap"}})),m=function(e){var n=e.icon,t=e.title,r=(0,s.Z)(e,x);return(0,h.jsx)(d.Z,p({label:(0,h.jsxs)(Z,{children:[n,(0,h.jsx)(g,{children:t})]})},r))},b=function(e){var n=e.validate,t=e.children;return n?(0,h.jsx)(h.Fragment,{children:t}):null},v=t(2618),y=((0,f.ZP)(v.Z)((function(){return{flex:1,width:"100%",height:"100%"}})),(0,f.ZP)(v.Z)((function(){return{flex:1,width:"100%",overflowY:"hidden"}})),(0,f.ZP)(v.Z)((function(){return{flex:1,height:"100%",overflowX:"hidden"}}))),O=(0,f.ZP)(c.Z)((function(){return(0,u.Z)({display:"flex",flexGrow:1},"&[hidden]",{display:"none"})})),w=function(e){var n=e.value,t=e.index,r=e.children;return(0,h.jsx)(O,{role:"tabpanel",hidden:n!==t,children:(0,h.jsx)(y,{children:(0,h.jsx)(b,{validate:n===t,children:r})})})},P=t(4235),S=t(3720),C=t(4386),k=t(6447),E=t(318),_=t(6571),N=t(461),D=t(7425),I=t(1820),M=t(2116),T=t(5092),R=t(2440),L=t(5272),H=t(4212),W=t(8619),X=t(8584),z=t(4377);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=function(e){var n=e.name,t=(0,z._y)(),i=(0,E.Z)(t,1)[0],o=(0,z.eH)("\u6b63\u5728\u6311\u6218\u7684boss"),c=Object.entries(i).filter((function(e){return 0===(0,E.Z)(e,1)[0].indexOf(n)})).reduce((function(e,n){var t=(0,E.Z)(n,2),r=t[0],i=t[1];return Y(Y({},e),{},(0,u.Z)({},r,i))}),{}),l=(0,r.useMemo)((function(){return c[n]&&String(c[n]).indexOf("0b")<0?Number(c[n]):Object.entries(c).reduce((function(e,t){var r=(0,E.Z)(t,2),i=r[0],o=r[1];return e+(i===n?0:Number(o))}),0)}),[JSON.stringify(c)]),s=(0,r.useMemo)((function(){if(o&&0===String(o).indexOf(n)){var e=String(o).split(" ");return e.length>1?(0,h.jsx)(N.Z,{color:"primary",size:"small",label:e[e.length-1]}):(0,h.jsx)(N.Z,{color:"primary",size:"small",label:"\u6218\u6597\u4e2d"})}return null}),[o]);return(0,h.jsxs)(D.Z,{expandIcon:(0,h.jsx)(_.Z,{}),sx:s?{background:function(e){return e.palette.secondary.light}}:{},children:[(0,h.jsx)(a.Z,{sx:{width:"40%",flexShrink:0},children:n}),(0,h.jsx)(a.Z,{sx:{width:"40%",color:"text.secondary"},children:l}),s]})},U=function(e){var n=e.name,t=e.level,r=(0,z.eH)("".concat(n," - ").concat(t));return(0,h.jsxs)(c.Z,{display:"flex",children:[(0,h.jsx)(a.Z,{sx:{width:"40%",flexShrink:0},children:t}),(0,h.jsx)(a.Z,{sx:{color:"text.secondary"},children:String(r||"")})]})},F=function(e){var n=e.name,t=e.levels,i=(0,z.eH)(n),o=(0,r.useMemo)((function(){return i&&0===String(i).indexOf("0b")?t.map((function(e,n){return[e,Number(String(i)[n+2])||0]})):t.map((function(e){return[e,0]}))}),[i]),c=(0,r.useCallback)((function(e){return o.findIndex((function(n){var t=(0,E.Z)(n,2),r=t[0],i=t[1];return r===e&&i>0}))>=0}),[o]),l=(0,r.useCallback)((function(e){return function(){var t=o.reduce((function(n,t){var r=(0,E.Z)(t,2),i=r[0],o=r[1];return i===e?n+Math.abs(Number(o)-1):n+Number(o)}),"0b");fetch("/setState?key=".concat(encodeURIComponent(n),"&value=").concat(encodeURIComponent(t)))}}),[o]);return(0,h.jsxs)(I.Z,{children:[(0,h.jsx)(G,{name:n}),(0,h.jsx)(M.Z,{}),(0,h.jsx)(T.Z,{sx:{p:1},children:(0,h.jsx)(R.Z,{sx:{p:0,width:"100%",bgcolor:"background.paper"},children:["\u8d85\u7ea7","\u9ad8\u7ea7+","\u9ad8\u7ea7","\u4e2d\u7ea7","\u521d\u7ea7"].map((function(e){var r=t.includes(e);return(0,h.jsx)(L.ZP,{secondaryAction:r&&(0,h.jsx)(H.Z,{edge:"end",onChange:l(e),checked:c(e)}),disablePadding:!0,children:(0,h.jsx)(W.Z,{onClick:l(e),disabled:!1===r,children:(0,h.jsx)(X.Z,{primary:(0,h.jsx)(U,{name:n,level:e})})})},e)}))})})]})},B=t(3543),J=t(3916),q=t(6878),K=function(){var e=(0,q.e)("isDebug"),n=(0,r.useMemo)((function(){return e||!1}),[e]);return(0,h.jsx)(b,{validate:n,children:(0,h.jsx)(J.Z,{title:"\u8c03\u8bd5\u6a21\u5f0f",children:(0,h.jsx)(B.Z,{})})})},Q=t(4356),V=t(6761),$=t(5295),ee=t(8515),ne=t(6867),te=t(9490),re=(0,f.ZP)(c.Z)((function(e){var n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:n.palette.divider}})),ie=function(e){var n=e.index,t=e.style,r=(0,z.eM)(),i=(0,E.Z)(r,1)[0];if(n<(i||[]).length){var o=(0,E.Z)((i||[])[n],2),c=o[0],l=o[1];return(0,h.jsx)(J.Z,{title:te.ou.fromSeconds(c).toLocaleString(te.ou.DATETIME_MED_WITH_SECONDS),children:(0,h.jsx)(re,{style:t,sx:n%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,h.jsx)(a.Z,{variant:"body2",noWrap:!0,children:l})},n)})}return null},oe=function(){var e=(0,z.eM)(),n=(0,E.Z)(e,2),t=n[0],r=n[1];return(0,h.jsxs)($.Z,{children:[(0,h.jsx)(ee.Z,{action:(0,h.jsx)(J.Z,{title:"\u6e05\u7a7a",children:(0,h.jsx)(ne.Z,{onClick:function(){r([])},children:(0,h.jsx)(V.Z,{})})}),title:"\u65e5\u5fd7"}),(0,h.jsx)(M.Z,{}),(0,h.jsx)(Q.t7,{className:"List",width:"100%",height:400,itemCount:t?t.length:0,itemSize:40,children:ie})]})},ce=(0,f.ZP)(c.Z)((function(e){var n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:n.palette.divider}})),le=function(e){var n=e.index,t=e.style,r=(0,z._y)(),i=(0,E.Z)(r,1)[0];if(n<Object.keys(i||{}).length){var o=Object.keys(i||{})[n];return(0,h.jsx)(ce,{style:t,sx:n%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,h.jsxs)(a.Z,{variant:"body2",noWrap:!0,children:[o," : ",(i||{})[o]]})},n)}return null},se=function(){var e=(0,z._y)(),n=(0,E.Z)(e,1)[0];return(0,h.jsxs)($.Z,{children:[(0,h.jsx)(ee.Z,{title:"\u6742\u9879"}),(0,h.jsx)(M.Z,{}),(0,h.jsx)(Q.t7,{className:"List",width:"100%",height:400,itemCount:Object.keys(n||{}).length,itemSize:40,children:le})]})},ue=t(9149),ae=function(){var e=(0,q.e)("isRunning"),n=(0,r.useMemo)((function(){return e||!1}),[e]);return(0,h.jsx)(J.Z,{title:n?"\u542f\u7528":"\u6682\u505c",children:(0,h.jsx)(ue.Z,{color:"secondary",onChange:function(e,n){n?fetch("/start"):fetch("/stop")},checked:n})})},de=t(1987),fe=t(3160),he=t(8629),xe=(0,f.ZP)(de.Z)((function(){return(0,u.Z)({},"&.".concat(fe.Z.root),{display:"inline-flex"})})),je=(0,f.ZP)(c.Z)((function(e){var n=e.theme;return{display:"flex",flexDirection:"column",padding:n.spacing(2),width:n.spacing(24)}})),pe=function(){var e=(0,q.e)("startTime"),n=(0,q.e)("lastActionTime"),t=(0,r.useState)(null),i=t[0],o=t[1],c=(0,r.useState)(null),l=c[0],s=c[1];return(0,he.Z)((function(){o((function(){return e?te.ou.fromSeconds(Number(e)).toRelative():null})),s((function(){return n?te.ou.fromSeconds(Number(n)).toRelative():null}))}),1e3,{immediate:!0}),(0,h.jsxs)(xe,{children:[(0,h.jsxs)(je,{children:[(0,h.jsx)(a.Z,{variant:"h6",children:"\u5f00\u59cb\u65f6\u95f4"}),(0,h.jsx)(a.Z,{children:e?te.ou.fromSeconds(Number(e)).toLocaleString(te.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,h.jsx)(a.Z,{variant:"caption",sx:{mt:1},children:i||"-"})]}),(0,h.jsx)(M.Z,{orientation:"vertical",flexItem:!0}),(0,h.jsxs)(je,{children:[(0,h.jsx)(a.Z,{variant:"h6",children:"\u6d3b\u8dc3\u65f6\u95f4"}),(0,h.jsx)(a.Z,{children:n?te.ou.fromSeconds(Number(n)).toLocaleString(te.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,h.jsx)(a.Z,{variant:"caption",sx:{mt:1},children:l||"-"})]})]})},Ze=(0,f.ZP)(S.Z)((function(e){return{zIndex:e.theme.zIndex.drawer+1}})),ge=(0,f.ZP)(C.Z)((function(e){return{padding:e.theme.spacing(0,2)}})),me=function(){var e=(0,z.eH)("currentTargets");return(0,h.jsx)(Ze,{position:"static",children:(0,h.jsxs)(ge,{disableGutters:!0,children:[(0,h.jsxs)(a.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:["WFHelper - ",e||"\u65e0"]}),(0,h.jsxs)(k.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,h.jsx)(K,{}),(0,h.jsx)(ae,{})]})]})})},be=(0,P.Z)((function(e){return{root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,minWidth:e.breakpoints.values.md,height:"100%"},container:{display:"flex",flex:1,overflow:"hidden"}}})),ve=function(e){var n=e.children,t=be();return(0,h.jsxs)("div",{className:t.root,children:[(0,h.jsx)(me,{}),(0,h.jsx)("div",{className:t.container,children:n})]})},ye=t(558),Oe=(0,f.ZP)(de.Z)((function(e){var n=e.theme;return(0,u.Z)({},"&.".concat(fe.Z.root),{display:"flex",justifyContent:"center",padding:n.spacing(4),backgroundColor:n.palette.grey[100]})})),we=function(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Oe,{children:(0,h.jsx)(pe,{})}),(0,h.jsx)(ye.ZP,{container:!0,p:2,pb:0,spacing:2,children:[["\u516b\u5c90\u5927\u86c7",["\u9ad8\u7ea7"]],["\u7ba1\u7406\u8005",["\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u8bc5\u5492\u5f27\u9b54\u827e\u57fa\u5c14",["\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u4e0d\u6b7b\u738b\u745e\u897f\u5854\u5c14",["\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u767d\u864e",["\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u5bc4\u5c45\u87f9\u8239\u957f",["\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u5e9f\u589f\u9b54\u50cf",["\u8d85\u7ea7","\u9ad8\u7ea7+","\u9ad8\u7ea7","\u4e2d\u7ea7"]],["\u7ef4\xb7\u7d22\u62c9\u65af",["\u521d\u7ea7"]],["\u4f0a\u5c14\u8003\u666e\u65af",["\u9ad8\u7ea7+","\u9ad8\u7ea7"]]].map((function(e){var n=e,t=(0,E.Z)(n,2),r=t[0],i=t[1];return(0,h.jsx)(ye.ZP,{item:!0,xs:4,children:(0,h.jsx)(F,{name:r,levels:i})},r)}))}),(0,h.jsxs)(ye.ZP,{container:!0,p:2,spacing:2,children:[(0,h.jsx)(ye.ZP,{item:!0,xs:6,children:(0,h.jsx)(oe,{})}),(0,h.jsx)(ye.ZP,{item:!0,xs:6,children:(0,h.jsx)(se,{})})]})]})},Pe=t(2456),Se=function(){var e=(0,r.useRef)(null),n=function(){if(e&&e.current){var n=e.current,t=n.getContext("2d");fetch("/getScreenShot").then((function(e){return e.blob()})).then((function(e){var r=new Image;r.src=URL.createObjectURL(e),r.onload=function(){n.width=r.width,n.height=r.height,t&&t.drawImage(r,0,0),r.remove()}}))}},t=function(t,r){if(e&&e.current){var i=e.current,o=i.getContext("2d");"not-allowed"!==i.style.cursor&&fetch("/touchScreen?x=".concat(t,"&y=").concat(r)).then((function(){i.style.cursor="not-allowed",o&&(o.globalCompositeOperation="destination-out",o.fillStyle="rgba(255, 255, 255, 0.5)",o.beginPath(),o.fillRect(0,0,i.width,i.height),o.fill(),o.globalCompositeOperation="source-over")})).then((function(){return new Promise((function(e){return setTimeout(e,1e3)}))})).then((function(){i.style.cursor="auto"})).then(n)}},i=function(t,r,i,o){if(e&&e.current){var c=e.current,l=c.getContext("2d");"not-allowed"!==c.style.cursor&&fetch("/swipeScreen?x1=".concat(t,"&y1=").concat(r,"&x2=").concat(i,"&y2=").concat(o)).then((function(){c.style.cursor="not-allowed",l&&(l.globalCompositeOperation="destination-out",l.fillStyle="rgba(255, 255, 255, 0.5)",l.beginPath(),l.fillRect(0,0,c.width,c.height),l.fill(),l.globalCompositeOperation="source-over")})).then((function(){return new Promise((function(e){return setTimeout(e,1e3)}))})).then((function(){c.style.cursor="auto"})).then(n)}};return(0,r.useEffect)((function(){if(e&&e.current){var r=e.current,o={x:0,y:0,mousedown:function(e){o.x=e.clientX,o.y=e.clientY},mouseup:function(e){if(o.x&&o.y)if(Math.abs(e.clientX-o.x)>10||Math.abs(e.clientY-o.y)>10){var n=r.getBoundingClientRect(),c=o.x-n.left,l=o.y-n.top,s=e.clientX-n.left,u=e.clientY-n.top;i(c,l,s,u)}else{var a=r.getBoundingClientRect(),d=e.clientX-a.left,f=e.clientY-a.top;t(d,f)}o.x=0,o.y=0}};r.addEventListener("mousedown",o.mousedown),r.addEventListener("mouseup",o.mouseup),r.addEventListener("mouseleave",o.mouseup),n()}}),[e]),(0,h.jsxs)($.Z,{children:[(0,h.jsx)(ee.Z,{action:(0,h.jsx)(J.Z,{title:"\u5237\u65b0",children:(0,h.jsx)(ne.Z,{onClick:n,children:(0,h.jsx)(Pe.Z,{})})}),title:"\u622a\u56fe"}),(0,h.jsx)(M.Z,{}),(0,h.jsx)("canvas",{ref:e})]})},Ce=function(){var e=(0,r.useState)(0),n=e[0],t=e[1];return(0,h.jsx)(ve,{children:(0,h.jsxs)(c.Z,{sx:{flexGrow:1,display:"flex"},children:[(0,h.jsxs)(l.Z,{orientation:"vertical",variant:"scrollable",value:n,onChange:function(e,n){t(n)},sx:{borderRight:1,borderColor:"divider",background:function(e){return e.palette.background.paper}},children:[(0,h.jsx)(m,{icon:(0,h.jsx)(i.Z,{}),title:"\u4eea\u8868\u76d8"}),(0,h.jsx)(m,{icon:(0,h.jsx)(o.Z,{}),title:"\u5c4f\u5e55"})]}),(0,h.jsx)(w,{value:n,index:0,children:(0,h.jsx)(we,{})}),(0,h.jsx)(w,{value:n,index:1,children:(0,h.jsx)(Se,{})})]})})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7220)}])}},function(e){e.O(0,[809,673,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);